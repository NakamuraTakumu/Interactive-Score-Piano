
## 基本原則 (Core Principles)

* **言語設定 (Language)**:
    * ユーザーとの対話、計画の提示、エラーの説明などはすべて**日本語**で行うこと。
    * コミットメッセージの提案は、慣習に従い英語（例: `feat: ...`）でも可とするが、その内容は日本語で説明すること。
* **計画と承認 (Plan & Approve)**: 実装コードを生成する前に、必ず箇条書きで「実装計画」を提示し、ユーザーからの明示的な承認を待つこと。
* **既存ライブラリの活用 (Leverage Existing Libraries)**:
    * **コード記述の最小化**: 自前でロジックを実装することは最後の手段とする。まずは標準ライブラリ、あるいは信頼性の高い外部ライブラリ（npmパッケージ等）で代替できないか徹底的に検討すること。
    * **車輪の再発明の禁止**: すでに解決済みの問題に対して独自のユーティリティ関数を作成しないこと。外部ライブラリを導入する必要がある場合は、計画フェーズでその選定理由を提示すること。
* **設計の整合性と保守性 (Design Integrity & Maintainability)**:
    * 単に「動けばよい」だけのアドホックな実装（その場しのぎの修正）は**厳禁**とする。
    * 常に将来の拡張性とコードの再利用性を考慮し、既存のアーキテクチャやデザインパターンに適合した「正しい」実装を行うこと。
* **段階的な実装 (Incremental Implementation)**: 要求された機能の実装のみに集中すること。ただし、指示されていない範囲であっても、既存コードを破壊するような変更は避けること。
* **型の厳格化 (TypeScript Strictness)**:
    * 厳格な型定義を行うこと。`any` 型などの使用は、どうしても避けられない場合を除き禁止する。
    * オブジェクトの定義には、型エイリアス（type）よりもインターフェース（interface）を優先すること。

## ドキュメントと可読性 (Documentation & Clarity)

* **ドキュメント**: エクスポートされるすべての関数とクラスには、コメントを付与すること。
* **「何」ではなく「なぜ」**: コード内のコメントでは、構文の説明（何をしているか）ではなく、複雑なロジックの「意図（なぜそうするのか）」を説明すること。

## ワークフローとGit連携 (Workflow & Git Integration)

* **ステップ1: 分析**: リクエストを分析する。既存のライブラリやAPIで実現可能か調査する。
* **ステップ2: 計画**: 実装プラン（および必要なライブラリの導入）を提案する。
* **ステップ3: コーディング**: コードを出力する。
    * *フォーマット*: コードブロックを使用する。ファイルサイズが大きい場合は、可読性を高めるために、ファイル全体ではなく**変更された関数やセクションのみ**を（前後のコンテキストを含めて）出力すること。
* **ステップ4: 検証 (Verification)**:
    * ユーザーに対し、ビルドコマンドの実行を依頼する。
    
    * **型エラーがないこと**を確認し、エラーがある場合は修正を行うまで次のステップに進まないこと。
* **ステップ5: コミット提案**: 検証完了後、簡潔で慣習的なGitコミットメッセージを**提案**すること（`git commit` は実行しない）。

## 目標 (Goal)

型安全性、APIの正確性、および既存資産の最大活用を重視し、**ビルドエラーのない**堅牢かつ保守性の高いアプリを効率的に開発すること。